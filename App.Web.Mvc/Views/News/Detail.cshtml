@inject SignInManager<User> SignInManager
@model NewsAndCommentsViewModel

<section class="single-post-area">
	<!-- Single Post Title -->
	@if (TempData["MessageSuccess"] != null)
	{
	
			<div class="alert alert-success col-6 offset-3 text-center" role="alert">
				@TempData["MessageSuccess"]
				
			</div>
	}
	else if (TempData["MessageError"] != null)
	{
		<div class="alert alert-danger col-6 offset-3 text-center" role="alert">
			@TempData["MessageError"]

		</div>
	}

	<div class="single-post-title bg-img background-overlay" style="background-image: url(/tema/img/bg-img/1.jpg);">
		<div class="container h-100">
			<div class="row h-100 align-items-end">
				<div class="col-12">
					<div class="single-post-title-content">
						<!-- Post Tag -->
						<div class="gazette-post-tag">
							<a href="#">@Model.NewsDto.News.Category.Name</a>
						</div>
						<h2 class="font-pt">@Model.NewsDto.News.Title</h2>
						<p>@Model.NewsDto.News.CreatedAt.GetValueOrDefault().ToShortDateString()</p>
					</div>
				</div>
			</div>
		</div>
	</div>

	<div class="single-post-contents">
		<div class="container">
			<div class="row justify-content-center">
				<div class="col-12 col-md-8">
					<div class="single-post-text">
						@* <p>@(Model.News.Content.ToString().Length > 150 ? Model.News.Content.ToString().Substring(0, 150) : Model.News.Content) </p>*@
						<p>@Model.NewsDto.News.SubTitle </p>

					</div>
				</div>
				<div class="col-12">
					<div class="single-post-thumb text-center">
						<img class="img-fluid " src="~/img/news/@Model.NewsDto.News.ImagePath" style="width: 800px; height: 600px;" alt="">
					</div>
				</div>
				<div class="col-12 col-md-8">
					<div class="single-post-text">
						<p>@Model.NewsDto.News.Content </p>
					</div>
				</div>
				@*  <div class="col-12 col-md-10">
				<div class="single-post-blockquote">
				<blockquote>
				<h6 class="font-pt mb-0">“Vestibulum nulla diam, sodales sit amet erat vel, mollis iaculis lectus. Suspendisse in rhoncus est. Sed aliquet mauris in efficitur tempor. Proin enim felis, laoreet id viverra at”</h6>
				</blockquote>
				</div>
				</div>
				<div class="col-12 col-md-8">
				<div class="single-post-text">
				<p>Suspendisse vitae sapien vitae urna eleifend dapibus ut non tortor. In nec metus ac mi ultrices commodo interdum et lacus. Suspendisse potenti. Suspendisse interdum semper dolor nec posuere. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque ut orci non tortor pretium hendrerit at vel massa. Nunc ut fermentum felis.</p>
				</div>
				</div>*@
			</div>
		</div>
	</div>
</section>

<section class="gazette-post-discussion-area section_padding_100 bg-gray">
	<div class="container">
		<div class="row justify-content-center">
			<div class="col-12 col-md-8">
				<!-- Comment Area Start -->
				<div id="comments" class="comment_area section_padding_50 clearfix">
					<div class="gazette-heading">
						<h4 class="font-bold">Discussion</h4>
					</div>

					@if (Model.NewsDto.News.NewsComments.Any())
					{

						<ol>
							@foreach (var item in Model.NewsCommentsList.NewsComments)
							{
								<li class="single_comment_area">
									<div class="comment-wrapper d-md-flex align-items-start">
										<!-- Comment Meta -->
										<div class="comment-author">
											<img src="~/Tema/img/blog-img/25.jpg" alt="">
										</div>
										<!-- Comment Content -->
										<div class="comment-content">
											<h5>@item.CreatedByName</h5>
											<span class="comment-date font-pt">@item.CreatedAt.GetValueOrDefault().ToShortDateString()</span>
											<p>@item.Comment</p>
											@*  <a class="reply-btn" href="#">Reply <i class="fa fa-reply" aria-hidden="true"></i></a>*@
										</div>
									</div>

									<!-- Single Comment Area -->
									@*  <ol class="children">
							<li class="single_comment_area">
							<div class="comment-wrapper d-md-flex align-items-start">
							<!-- Comment Meta -->
							<div class="comment-author">
							<img src="~/Tema/img/blog-img/25.jpg" alt="">
							</div>
							<!-- Comment Content -->
							<div class="comment-content">
							<h5>John Doe</h5>
							<span class="comment-date text-muted">December 18, 2017</span>
							<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed dictum nunc libero, vitae rutrum nunc porta id. Interdum et malesuada fames ac ante ipsum primis in faucibus. Nam arcu augue, semper at elementum nec, cursus nec ante.</p>
							<a class="reply-btn" href="#">Reply <i class="fa fa-reply" aria-hidden="true"></i></a>
							</div>
							</div>
							</li>
							</ol>*@
								</li>
							}

						</ol>
					}
					else
					{
						<p>No comments yet</p>
					}
				</div>
				@if (SignInManager.IsSignedIn(User))
				{

					@*<partial name="~/Views/Comment/_CommentAdd.cshtml" model="new NewsCommentAddDto{NewsId=Model.NewsDto.News.Id}"/>*@

					<div class="leave-comment-area clearfix">
						<div class="comment-form">
							<div class="gazette-heading">
								<h4 class="font-bold">leave a comment</h4>
							</div>
							@*	<div id="result" class="text-success">@TempData["Message"]</div>*@		
							<!-- Comment Form -->
							<form asp-action="Detail" asp-controller="News" asp-route-id="@Model.NewsDto.News.Id" id="form-comment-add" method="post">
								<div asp-validation-summary="ModelOnly" class="text-danger" id="validation-summary"></div>


								<input asp-for="@Model.NewsDto.News.Id" type="hidden" />
								<input asp-for="@Model.NewsComments.UserId" type="hidden" />
								<div class="form-group">
									<input type="text" class="form-control" asp-for="@Model.NewsComments.Name" placeholder="Enter Your Full Name">
									<span asp-validation-for="@Model.NewsComments.Name" class="text-danger"></span>
								</div>
								<div class="form-group">
									<input type="email" class="form-control" asp-for="@Model.NewsComments.Email" placeholder="Email">
									<span asp-validation-for="@Model.NewsComments.Email" class="text-danger"></span>

								</div>
								<div class="form-group">
									<textarea class="form-control" asp-for="@Model.NewsComments.Comment" cols="30" rows="10" placeholder="Message"></textarea>
									<span asp-validation-for="@Model.NewsComments.Comment" class="text-danger"></span>

								</div>
								<button type="submit" id="btnSave" class="btn leave-comment-btn">SUBMIT <i class="fa fa-angle-right ml-2"></i></button>
							</form>
						</div>
					</div>

				}
				else
				{
					<div class="leave-comment-area clearfix">
						<div class="comment-form">
							<div class="gazette-heading">
								<h4 class="font-bold">leave a comment</h4>
								<h5 class="mb-5 text-danger">Please <a asp-controller="Auth" asp-action="Login" class="btn btn-primary">Login</a> to leave a comment</h5>
							</div>
							<!-- Comment Form -->
							<form asp-action="Detail" asp-controller="News" asp-route-id="@Model.NewsDto.News.Id" id="form-comment-add" method="post" class="disabled">
								<div asp-validation-summary="ModelOnly" class="text-danger" id="validation-summary"></div>


								<input asp-for="@Model.NewsDto.News.Id" type="hidden" />
								<input asp-for="@Model.NewsComments.UserId" type="hidden" />
								<div class="form-group">
									<input type="text" class="form-control" asp-for="@Model.NewsComments.Name" placeholder="Enter Your Full Name" disabled>
									<span asp-validation-for="@Model.NewsComments.Name" class="text-danger"></span>
								</div>
								<div class="form-group">
									<input type="email" class="form-control" asp-for="@Model.NewsComments.Email" placeholder="Email" disabled>
									<span asp-validation-for="@Model.NewsComments.Email" class="text-danger"></span>

								</div>
								<div class="form-group">
									<textarea class="form-control" asp-for="@Model.NewsComments.Comment" cols="30" rows="10" placeholder="Message" disabled></textarea>
									<span asp-validation-for="@Model.NewsComments.Comment" class="text-danger"></span>

								</div>
								<button type="submit" id="btnSave" class="btn leave-comment-btn" disabled>SUBMIT <i class="fa fa-angle-right ml-2"></i></button>
							</form>
						</div>
					</div>
				}
				<!-- Leave A Comment -->
			</div>
		</div>
	</div>
</section>

@section Scripts{
	<script src="~/lib/jquery-validation/dist/jquery.validate.min.js"></script>
	<script src="~/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js"></script>
}
@*@section Scripts{

	<script>
		$(document).ready(function () {
			$(function () {
				$(document).on('click', '#btnSave',
					function (event) {
						event.preventDefault();
						const form = $('#form-comment-add');
						const url = '/News/Detail/';
						const dataToSend = form.serialize();
						$.post(url, dataToSend).done(function () {
							Swal.fire(
								'!',
								`adlı kategori başarıyla silinmiştir.`,
								'success'
							)
												else {
								Swal.fire({
									icon: 'error',
									title: 'Başarısız işlem!',
									text: `Başarısız`
								})
							}
											///*	$("#result").fadeIn(data);*/
											//toastr(commentAddData);

								)
					};
			}
			);
		});

				});



	</script>
}*@



@*@section Scripts {
	<script src="~/tema/js/newsDetail.js" type="text/javascript"></script>
}*@
